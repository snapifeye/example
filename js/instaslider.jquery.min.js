(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="instaSlider",s={clientID:null,access_token:null,search:"@iamchristill",prevClass:"prev",nextClass:"next",limit:5,duration:400,auto:true,delay:5e3};o.prototype={init:function(){var t=this;t.container=t.element,t.$container=e(t.element),t.current=0,t.imgWidth=t.$container.width(),t.endpoint="https://api.instagram.com/v1/tags/"+this.options.search+"/media/recent?client_id="+this.options.clientID;t.username="";t.createSlider();t.sliderUL=t.$container.find(".instaslider-wrapper ul");if(this.options.auto){t.auto()}var n=t.options.search.substr(0,1)=="@";if(n){t.fetchUserFeed()}else{this.fetchHashtag()}},createSlider:function(){this.$container.append('<div class="instaslider-wrapper"><ul></ul></div>');this.createNav()},createNav:function(){var t=this;var n='<button class="'+this.options.prevClass+'" data-direction="prev">Prev</button>',r='<button class="'+this.options.nextClass+'" data-direction="next">Next</button>',i='<div class="instaslider-nav">'+n+r+"</div>";this.$container.append(i);this.$container.find("button").on("click",function(){t.setCurrent(e(this).data("direction"));t.transition()})},fetch:function(){return e.ajax({url:this.endpoint,data:{},dataType:"jsonp",type:"GET"})},fetchHashtag:function(){var t=this,n=this.$container,r=n.find(".instaslider-wrapper ul");t.fetch().done(function(n){n=t.limit(n.data,t.options.limit);t.slides=e.map(n,function(e,t){var i='<li><img src="'+n[t].images.standard_resolution.url+'" /></li>';r.append(i)})});t.fetch().fail(function(){r.remove();n.html('<div class="error"><p>Sorry,<br /> Could not fetch images at this time.</p></div>')})},setCurrent:function(e){var t=this;var n=t.current;n+=~~(e==="next")||-1;t.current=n<0?t.options.limit-1:n%t.options.limit;return n},transition:function(){var e=this;e.sliderUL.stop().animate({"margin-left":-(this.current*this.imgWidth)},e.options.duration)},auto:function(){var e=this;setInterval(function(){e.setCurrent("next");e.transition()},this.options.delay)},fetchUserFeed:function(){var t=this,n=this.$container,r=n.find(".instaslider-wrapper ul");this.endpoint="https://api.instagram.com/v1/users/search?q="+t.options.search+"&access_token="+t.options.access_token;this.fetch().done(function(n){var i=n.data[0].id;t.endpoint="https://api.instagram.com/v1/users/"+i+"/media/recent?access_token="+t.options.access_token;t.fetch().done(function(n){n=t.limit(n.data,t.options.limit);t.slides=e.map(n,function(e,t){var i='<li><img src="'+n[t].images.standard_resolution.url+'" /></li>';r.append(i)})})})},limit:function(e,t){return e.slice(0,t)}};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)